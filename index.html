<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <title>Die Roboter - Robot Demo</title>
</head>
<body class="m-0 p-5 bg-gray-100">
    <div class="max-w-full mx-auto bg-white p-5 rounded-lg shadow-lg">
        <h1 class="text-gray-800 text-center text-3xl font-bold mb-5">Die Roboter - Robot Demo</h1>
        
        <!-- Full width robot view -->
        <div class="relative w-full h-[calc(100vh-150px)]">
            <div class="w-full h-full p-4 border border-gray-300 rounded-lg">
                <div id="robot-view" class="w-full h-full bg-gray-100 rounded-lg overflow-hidden"></div>
            </div>
            
            <!-- Control panel overlay (bottom right) -->
            <div id="control-panel" class="absolute bottom-4 right-4 w-full md:w-96 bg-white rounded-2xl shadow-2xl transition-all duration-300 ease-in-out transform translate-y-[calc(100%-60px)] border border-black p-2">
                <!-- Panel header (always visible) -->
                <div id="panel-header" class="flex items-center justify-between p-2 cursor-pointer border-b border-black bg-white rounded-t-xl -mx-2 -mt-2 mb-2">
                    <h2 class="text-base font-medium text-black">Controls</h2>
                    <svg id="chevron-icon" class="w-4 h-4 text-black transition-transform duration-300 rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                </div>
                
                <!-- Panel content -->
                <div id="panel-content" class="p-2 max-h-[70vh] overflow-y-auto opacity-0 transition-opacity duration-300">
                    <div id="level-selector"></div>
                    
                    <h3 class="text-lg font-semibold mb-3">Robot</h3>
                    <div class="flex gap-2 mb-4" aria-label="robot-switch">
                        <button id="btn-lekiwi" class="px-4 py-2 bg-green-600 text-white border-0 rounded cursor-pointer transition-colors hover:bg-green-700">LeKiwi (default)</button>
                        <button id="btn-so101" class="px-4 py-2 bg-green-600 text-white border-0 rounded cursor-pointer transition-colors hover:bg-green-700">SO101</button>
                    </div>
                    
                    <h3 class="text-lg font-semibold mb-3">Joint Controls</h3>
                    <div id="joint-sliders-active" class="flex flex-col gap-2.5 p-2.5 bg-gray-50 rounded-lg max-h-96 overflow-y-auto" role="region" aria-label="joint-sliders">
                        <!-- Joint sliders will be added here dynamically -->
                    </div>
                    
                    <div class="text-xs text-gray-600 mt-4 leading-normal border-t border-gray-200 pt-4" aria-label="attribution">
                        <strong>Attribution</strong><br />
                        Burger bun 3D model:
                        <a href="https://sketchfab.com/3d-models/burger-bun-bread-1eb53bef512a48e5b61e934748201d4e" target="_blank" rel="noopener noreferrer" class="text-green-600 no-underline hover:underline">Burger bun bread (Sketchfab)</a><br />
                        Burger patty 3D model:
                        <a href="https://sketchfab.com/3d-models/cooked-burger-patty-meatball-fdeae6bf467f4ec2a42147cf877365c3" target="_blank" rel="noopener noreferrer" class="text-green-600 no-underline hover:underline">Cooked burger patty / meatball (Sketchfab)</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Parcel will automatically process this script tag -->
    <script type="module" src="./main.ts"></script>
    
    <script>
        // Handle active button state for robot switch
        const btnLekiwi = document.getElementById('btn-lekiwi');
        const btnSo101 = document.getElementById('btn-so101');
        
        btnLekiwi.addEventListener('click', function() {
            this.classList.remove('bg-green-600', 'hover:bg-green-700');
            this.classList.add('bg-green-800');
            btnSo101.classList.remove('bg-green-800');
            btnSo101.classList.add('bg-green-600', 'hover:bg-green-700');
        });
        
        btnSo101.addEventListener('click', function() {
            this.classList.remove('bg-green-600', 'hover:bg-green-700');
            this.classList.add('bg-green-800');
            btnLekiwi.classList.remove('bg-green-800');
            btnLekiwi.classList.add('bg-green-600', 'hover:bg-green-700');
        });
        
        // Handle panel toggle
        const controlPanel = document.getElementById('control-panel');
        const panelHeader = document.getElementById('panel-header');
        const chevronIcon = document.getElementById('chevron-icon');
        let isPanelOpen = false;
        
        panelHeader.addEventListener('click', function() {
            isPanelOpen = !isPanelOpen;
            
            if (isPanelOpen) {
                // Open panel
                controlPanel.classList.remove('translate-y-[calc(100%-60px)]');
                controlPanel.classList.add('translate-y-0');
                chevronIcon.classList.remove('rotate-180');
                controlPanel.classList.add('opacity-100');
            } else {
                controlPanel.classList.remove('opacity-100');
                // Close panel
                controlPanel.classList.remove('translate-y-0');
                controlPanel.classList.add('translate-y-[calc(100%-60px)]');
                chevronIcon.classList.add('rotate-180');
            }
        });
    </script>
</body>
</html>
